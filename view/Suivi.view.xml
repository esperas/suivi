<mvc:View
          controllerName="ecole.famille.controller.Suivi"
          xmlns="sap.m"
          xmlns:l="sap.ui.layout"
          xmlns:mvc="sap.ui.core.mvc">
    <Page 
        id="suivi" 
        class="sapUiStdPage" 
        title="Suivi des paiements">
        <customHeader>
		  <Bar>
		      <contentLeft>
		          
                  <OverflowToolbar id="otb3">
                    <Button id="navButton" icon="sap-icon://nav-back" visible="{device>/system/phone}" press="navBack" />
		            <Button id="RIB" text="RIB Ã©cole" press="downloadRIB">
			             <layoutData>
				            <OverflowToolbarLayoutData priority="{ path: 'famille>/famille',
		                                      formatter: '.formatter.isRIBvisible'}" />
			             </layoutData>
                    </Button>
                  </OverflowToolbar>
		      </contentLeft>

		      <contentMiddle>
                  <Text text = "Suivi des paiements"></Text>
		      </contentMiddle>

              <contentRight>
                  <ObjectNumber
                      number="{
                               parts: [ {path: 'famille>/solde'}],
                               formatter: '.formatter.soldeDisplay',
			                   type: 'sap.ui.model.type.Currency',
			                   formatOptions: {
				                    showMeasure: true
			                   }
                              }"
                    numberUnit="{path: 'famille>/currency'}"
                    state="{= ${famille>/solde} >= 0 ? 'Success' : 'Error' }"/>
              </contentRight>
            </Bar>
		</customHeader>



    <Panel >
        <ObjectHeader

                      intro="{i18n>maj} {famille>/maj}"
                      title="Solde de vos paiements"
                      number="{
                               parts: [ {path: 'famille>/solde'}],
                               formatter: '.formatter.soldeDisplay',
			                   type: 'sap.ui.model.type.Currency',
			                   formatOptions: {
				                    showMeasure: false
			                   }
                              }"
		              numberUnit="{path: 'famille>/currency'}"
                      numberState="{= ${famille>/solde} >= 0 ? 'Success' : 'Error' }"
                      >
            <statuses>
                <ObjectStatus
                    visible="{= ${famille>/solde} >= 0 ? false : true }"
                    text="{i18n>debiteur}"
                    state="Error" />
            </statuses>
        </ObjectHeader>
        <List id="idProductsList"
                items="{ path: 'famille>/suivi' }">
              <items>
                <ObjectListItem
                	title="{famille>libelle}"
                
				    press="onPDF"
				    number="{ parts: [{path: 'famille>facture'}, {path: 'famille>reglement'}],
		                      formatter: '.formatter.montant',
		                      type: 'sap.ui.model.type.Currency',
			                    formatOptions: {
				                        showMeasure: false
			                                    }
			                }"
				    numberUnit="{famille>/currency}"
				    type="{= ${famille>piece} > 0 ? 'Navigation' : 'Inactive'  }">
				    <firstStatus>
					    <ObjectStatus
					        visible="{ path: 'famille>paiement',
		                                      formatter: '.formatter.isStatusVisible'}"
						    text="{ path: 'famille>paiement',
		                                      formatter: '.formatter.isStatusText'}"
						    state="{ path: 'famille>paiement',
		                                      formatter: '.formatter.isStatusState'}"
                                      />
				    </firstStatus>
				    <attributes>
					    <ObjectAttribute text="Le {famille>date}" />
				    </attributes>
			    </ObjectListItem>
       
            </items>
        </List>
    </Panel>
    </Page>

</mvc:View>
